(()=>{"use strict";var e={291:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(601),n=r.n(o),i=r(314),s=r.n(i)()(n());s.push([e.id,'#screen-selector-wrapper{position:relative;max-width:calc(100vw - 10rem);margin:0 auto;padding:0 2rem 2rem 2rem}#screen-selector-wrapper:hover>#screen-selector{transform:translateY(0)}#screen-selector{display:flex;padding:0 .75rem 1rem .75rem;border-radius:0 0 1rem 1rem;background:#248;box-shadow:0 0 7px 0 #000;transition:transform .2s;transform:translateY(calc(0.75rem - 100%))}#screen-selector #screen-options{position:relative;top:.25rem;flex-grow:1;min-height:3rem;padding:0 .125rem;background:#359;border-radius:.75rem;box-shadow:0 0 1rem 0 #000 inset;display:flex;overflow-x:auto;overflow-y:hidden}#screen-selector #screen-options.firefox-scrollbar{scrollbar-color:#359 #1d3a74}#screen-selector #screen-options::-webkit-scrollbar{height:1rem;background:#248;border-radius:0 0 .75rem .75rem;box-shadow:0 0 10px #222 inset}#screen-selector #screen-options::-webkit-scrollbar-thumb{background:#359;border-radius:1rem;box-shadow:0 0 5px #222 inset}#screen-selector #screen-options::-webkit-scrollbar-thumb:hover{background:#305296;cursor:pointer}#screen-selector #screen-options .option{width:2.5rem;min-width:2.5rem;aspect-ratio:1;padding:.25rem;margin:.25rem;background:#359;border-radius:.5rem;box-shadow:0 0 1rem 0 #000;display:flex;justify-content:center;align-items:center;cursor:pointer}#screen-selector #screen-options .option .option-svg{width:100%;height:100%;filter:invert(5%)}@keyframes Shake{0%{transform:rotate(0deg)}20%{transform:rotate(5deg)}40%{transform:rotate(-5deg)}60%{transform:rotate(3deg)}80%{transform:rotate(-3deg)}100%{transform:rotate(0deg)}}#inventory{display:flex;width:min-content;height:36rem;position:relative;z-index:1;padding:1rem;margin:auto 0 auto -0.5rem;border-radius:0 1rem 1rem 0;background:#742;transition:translate .5s ease-in-out;translate:calc(1.5rem - 100%)}#inventory.open{translate:0}#inventory::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:1rem;box-shadow:0 0 10px #222;pointer-events:none}#inventory:has(#inform-outer.open) #drawer-handle{left:calc(100% + 20rem)}#inventory #inform-wrapper{position:absolute;z-index:-1;top:0;right:-23rem;width:23rem;height:38rem;overflow:hidden;pointer-events:none}#inventory #inform-wrapper #inform-outer{position:relative;width:20rem;height:36rem;margin:1rem 1rem 1rem calc(3rem - 100%);border-radius:0 .5rem .5rem 0;background:#742;box-shadow:2px -2px 5px rgba(17,17,17,.3333333333);transition:margin-left .5s ease-in-out}#inventory #inform-wrapper #inform-outer.open{margin-left:0}#inventory #inform-wrapper #inform-outer #inform-drawer{position:relative;top:.5rem;width:19rem;height:35rem;display:flex;flex-direction:column;margin:.5rem;border-radius:.5rem;background:#631;box-shadow:0 0 10px #222 inset;font-family:Arial,Helvetica,sans-serif}#inventory #inform-wrapper #inform-outer #inform-drawer:has(.header .desc:empty) .header .desc{display:none}#inventory #inform-wrapper #inform-outer #inform-drawer .header{display:grid;grid-template:"name amount" "desc desc";align-items:center;gap:.5rem;width:90%;margin:.5rem auto;padding:.5rem}#inventory #inform-wrapper #inform-outer #inform-drawer .header .name{grid-area:name;margin-left:auto;font-size:1.25rem;color:#6e5;text-shadow:0 0 10px #75f066;font-weight:750;white-space:nowrap}#inventory #inform-wrapper #inform-outer #inform-drawer .header .amount{grid-area:amount;font-family:monospace;font-size:1rem;color:#a76;margin-bottom:.15rem;text-shadow:0 0 5px rgba(17,17,17,.3333333333)}#inventory #inform-wrapper #inform-outer #inform-drawer .header .desc{grid-area:desc;max-height:8rem;padding:.25rem;color:#aaa;user-select:auto;pointer-events:auto;overflow-y:scroll;font-size:14px;background:#613010;border-radius:.25rem;box-shadow:0 0 10px rgba(17,17,17,.3333333333) inset}#inventory #inform-wrapper #inform-outer #inform-drawer .header .desc.firefox-scrollbar{scrollbar-color:#631 #742}#inventory #inform-wrapper #inform-outer #inform-drawer .header .desc::-webkit-scrollbar{width:.75rem;background:#631;border-radius:.25rem;box-shadow:0 0 10px #222 inset}#inventory #inform-wrapper #inform-outer #inform-drawer .header .desc::-webkit-scrollbar-thumb{background:#742;border-radius:.25rem;box-shadow:0 0 5px rgba(17,17,17,.6) inset}#inventory #inform-wrapper #inform-outer #inform-drawer .header .desc::-webkit-scrollbar-thumb:hover{background:#7a4929;cursor:pointer}#inventory #inform-wrapper #inform-outer #inform-drawer .divider{width:calc(100% - 1.25rem);height:2px;margin:0 auto;border-radius:1rem;background:rgba(119,68,51,.6666666667)}#inventory #inform-wrapper #inform-outer #inform-drawer .body{margin:1rem}#inventory #inform-wrapper #inform-outer #inform-drawer .body .buttons{display:flex;flex-direction:row;gap:.5rem;width:100%;height:100%}#inventory #inform-wrapper #inform-outer #inform-drawer .body .buttons>*{padding:.5rem;border:none;border-radius:.25rem;background:#7a4826;box-shadow:0 0 10px rgba(17,17,17,.3333333333)}#inventory #inform-wrapper #inform-outer #inform-drawer .body .buttons>*:hover{background:#7e4d2d}#inventory #inform-wrapper #inform-outer #inform-drawer .body .buttons>*:active{background:#855738;scale:.95}#inventory #inform-wrapper #inform-outer #inform-drawer .body .buttons .sell-all{margin-left:auto}#inventory #inform-wrapper #inform-outer #drawer-handle{position:absolute;top:50%;left:0;translate:-0.5rem -50%;margin-left:calc(100% - 1px);width:3rem;padding:.5rem;cursor:pointer;pointer-events:auto;user-select:none;filter:drop-shadow(7px 2px 4px rgba(0, 0, 0, 0.2))}#inventory #inv-container{display:flex;flex-direction:column;background:#7d4d2d;border-radius:.75rem;overflow-y:auto;overflow-x:hidden}#inventory #inv-container.firefox-scrollbar{scrollbar-color:#854 #653a1d}#inventory #inv-container::-webkit-scrollbar{width:1.25rem;background:#742;border-radius:0 1rem 1rem 0;box-shadow:0 0 10px #222 inset}#inventory #inv-container::-webkit-scrollbar-thumb{background:#854;border-radius:1rem;box-shadow:0 0 5px #222 inset}#inventory #inv-container::-webkit-scrollbar-thumb:hover{background:#8e5e4d;cursor:pointer}#inventory #inv-container::before{content:"";position:absolute;top:1rem;left:1rem;width:calc(100% - 2rem);height:calc(100% - 2rem);border-radius:.75rem;box-shadow:0 0 15px #111 inset;pointer-events:none}#inventory #inv-container .stage-crops{display:flex;align-items:center;justify-content:center;flex-direction:row;flex-wrap:wrap;gap:.5rem;width:25rem;padding:.75rem 0;margin:.5rem;border-radius:.5rem;background:var(--stage-color);box-shadow:0 0 10px #222 inset}#inventory #inv-container .stage-crops .crop{width:3rem;padding:.25rem;background:color-mix(in oklab, var(--stage-color) 95%, #000);border-radius:.75rem;box-shadow:0 0 10px rgba(34,34,34,.3333333333) inset;pointer-events:auto;cursor:pointer}#inventory #inv-container .stage-crops .crop:hover{background:color-mix(in oklab, var(--stage-color) 90%, #000)}#inventory #inv-container .stage-crops .crop:hover .icon{animation:Shake .4s linear}#inventory #inv-container .stage-crops .crop:active{background:color-mix(in oklab, var(--stage-color) 85%, #000)}#inventory #inv-container .stage-crops .crop:not(.unlocked) .icon{filter:brightness(0) blur(5px)}#inventory #inv-container .stage-crops .crop:not(.unlocked).seen-before .icon{filter:brightness(0.5) blur(2.5px)}#inventory #inv-container .stage-crops .crop .icon{padding:.25rem}#playground{position:absolute;width:100%;height:100%;background:#333}#playground #playground-canvas{position:absolute;top:0;left:0}#playground #logo-wrapper{position:absolute;display:flex;justify-content:center;pointer-events:none;user-select:none;transform:translate(-50%, -50%)}#playground #logo-wrapper #logo{width:25vh;height:25vh;filter:brightness(1.5);pointer-events:none}#playground #logo-wrapper #background-name{font-family:sans-serif;font-size:8vh;font-weight:1000;line-height:.8;margin:auto 0 0 -2.5vh;color:#4f4f4f;opacity:.6}#playground #logo-wrapper #background-name #df{position:absolute;top:-0.75vh;font-size:1.5em}#playground #blue-screen{position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle, rgba(0, 100, 150, 0.2) 20%, rgba(0, 255, 255, 0.1) 100%)}@keyframes DragShake{0%{transform:rotate(10deg)}50%{transform:rotate(-10deg)}100%{transform:rotate(10deg)}}#plantDrag{position:absolute;z-index:10}#plantDrag .crop{position:absolute;width:3rem;translate:-50% -50%;pointer-events:none}#main-screen{display:flex;position:absolute;top:0;left:0;width:100%;height:100%}#structure{position:relative;width:100%;height:100%;display:flex;flex-direction:column;background:#3060dd}#plantDrag{position:absolute}.crop{display:flex;aspect-ratio:1}.crop .icon{width:100%;aspect-ratio:1;transform-origin:center center;pointer-events:none;user-select:none;image-rendering:pixelated}#settings-screen{display:flex;position:absolute;top:0;left:0;width:100%;height:100%;background:red}#stages{position:absolute;top:0;left:0;width:100%;height:100%}.stage{position:absolute;width:25rem;padding:.75rem;background:var(--window-color);border-radius:.75rem;color:color-mix(in oklab, var(--window-color) 40%, #fff)}.stage:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;box-shadow:0 0 10px #333;pointer-events:none}.stage>.header{position:relative;display:flex;justify-content:center;align-items:center;width:100%;margin:-0.25rem 0 .5rem 0;cursor:grab}.stage>.header:after{content:"";position:absolute;left:-1rem;top:-1rem;width:100%;height:100%;padding:1rem}.stage>.header>.title{font-size:1.25rem;font-weight:bold;font-family:Arial,Helvetica,sans-serif}.stage>.header>.button{position:absolute;right:.5rem;width:1rem;height:1rem;border-radius:1rem;--button-color: color-mix(in oklab, var(--window-color) 80%, #fff);background:var(--button-color);cursor:pointer}.stage>.header>.button:hover{background:color-mix(in oklab, var(--button-color) 95%, #000)}.stage>.header>.button:active{background:color-mix(in oklab, var(--button-color) 85%, #000)}.stage>.inner-body{display:flex;flex-direction:column;width:100%;min-height:1rem;background:color-mix(in oklab, var(--window-color) 95%, #fff);--inner-body-border-radius: 0.5rem;border-radius:var(--inner-body-border-radius);font-family:Arial,Helvetica,sans-serif}@keyframes CropWobble{0%,80%{transform:rotate(0deg)}85%{transform:rotate(-10deg)}90%{transform:rotate(0deg)}95%{transform:rotate(10deg)}100%{transform:rotate(0deg)}}#Farming-window{--window-color: #6d3a22;width:19rem}#Farming-window .inner-body{--inner-body-border-radius: 1.75rem}#Farming-window .inner-body .farm-body{display:flex;flex-wrap:wrap;gap:1rem;padding:.75rem;border-radius:1.5rem;border:.25rem solid #632;background:#52291b}#Farming-window .inner-body .farm-body .land-wrapper{display:flex;width:5rem;aspect-ratio:1;border-radius:1.5rem;background:#472418}#Farming-window .inner-body .farm-body .land-wrapper:hover{box-shadow:0 0 5px rgba(102,170,0,.2666666667)}#Farming-window .inner-body .farm-body .land-wrapper:has(.land .crop.done){box-shadow:0 0 7.5px rgba(255,255,85,.3333333333)}#Farming-window .inner-body .farm-body .land-wrapper .land{width:4.5rem;aspect-ratio:1;margin:auto;border-radius:100%;background:#3d1f14}#Farming-window .inner-body .farm-body .land-wrapper .land .crop{justify-content:center;align-items:center;padding:.5rem;scale:var(--progress);transition:scale .5s ease-in-out}#Farming-window .inner-body .farm-body .land-wrapper .land .crop.done{animation:CropWobble 1.5s infinite linear}#Farming-window .inner-body .farm-body .land-wrapper .land .crop.wobble{animation:CropWobble .5s infinite linear;animation-delay:-0.6s}#Farming-window .inner-body .farm-body .land-wrapper .land .crop .icon{width:100%;height:100%}html,body{background:red;user-select:none}.screen{transition:opacity .5s}.preload{animation-duration:0s !important;transition:background-color 0s,opacity 0s,color 0s,width 0s,height 0s,padding 0s,margin 0s !important}',""]);const a=s},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",o=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),o&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),o&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,o,n,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(s[d]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);o&&s[h[0]]||(void 0!==i&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=i),r&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=r):h[2]=r),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),t.push(h))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function r(e){for(var r=-1,o=0;o<t.length;o++)if(t[o].identifier===e){r=o;break}return r}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var d=e[a],l=o.base?d[0]+o.base:d[0],h=i[l]||0,c="".concat(l," ").concat(h);i[l]=h+1;var p=r(c),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var u=n(m,o);o.byIndex=a,t.splice(a,0,{identifier:c,updater:u,references:1})}s.push(c)}return s}function n(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,n){var i=o(e=e||[],n=n||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=r(i[s]);t[a].references--}for(var d=o(e,n),l=0;l<i.length;l++){var h=r(i[l]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}i=d}}},659:e=>{var t={};e.exports=function(e,r){var o=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(r)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var o="";r.supports&&(o+="@supports (".concat(r.supports,") {")),r.media&&(o+="@media ".concat(r.media," {"));var n=void 0!==r.layer;n&&(o+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),o+=r.css,n&&(o+="}"),r.media&&(o+="}"),r.supports&&(o+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0;class o{constructor(e,t){this.renderName=!0,this.renderSymbol=!0,this.name=e,this.symbol=t}log(...e){const t=new Array,r=new Array;for(const o of e)"string"==typeof o?t.push(o):r.push(o);console.log(this.getFixed(...t),...r)}warn(...e){const t=new Array,r=new Array;for(const o of e)"string"==typeof o?t.push(o):r.push(o);console.warn(this.getFixed(...t),...r)}error(...e){const t=new Array,r=new Array;for(const o of e)"string"==typeof o?t.push(o):r.push(o);console.error(this.getFixed(...t),...r)}throw(...e){throw this.getFixed(...e)}toggleName(){this.renderName=!this.renderName}toggleSymbol(){this.renderSymbol=!this.renderSymbol}getFixed(...e){return this.renderSymbol&&this.symbol?this.renderName?`${this.symbol} [${this.name}] ${e} ${this.symbol}`:`${this.symbol} ${e} ${this.symbol}`:this.renderName?`[${this.name}] ${e}`:`${e}`}}var n,i=r(72),s=r.n(i),a=r(825),d=r.n(a),l=r(659),h=r.n(l),c=r(56),p=r.n(c),m=r(540),u=r.n(m),g=r(113),f=r.n(g),w=r(291),b={};b.styleTagTransform=f(),b.setAttributes=p(),b.insert=h().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=u(),s()(w.A,b),w.A&&w.A.locals&&w.A.locals;class y{constructor(){this.lastTime=performance.now(),this.FPS=0}update(){const e=performance.now(),t=e-this.lastTime;return this.lastTime=e,this.FPS=1e3/t,t}}function v(e,t,r=""){if(null==e)throw new Error(t+"\n"+r)}function x(e,...t){return function(e,t,...r){const o=document.createElement(e);return void 0!==t&&(void 0!==t.parent&&(t.parent.appendChild(o),delete t.parent),void 0!==t.classes&&t.classes.length>0&&(o.classList.add(...t.classes),delete t.classes),Object.assign(o,t)),o.append(...r),o}("div",e,...t)}function k(e){const t=document.getElementById(e);return v(t,`Element with id "${e}" not found.`),t}!function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(n||(n={}));class E{constructor(e){this.x=0,this.y=0,this.element=e,v(e,"MouseAttachment can only be attached to HTMLElements."),this.element.addEventListener("mousemove",(e=>{this.x=e.clientX,this.y=e.clientY}))}static attach(e){return E.instances.has(e)?E.instances.get(e):new E(e)}set onDown(e){this.element.addEventListener("mousedown",(t=>e(t.button)))}set onUp(e){this.element.addEventListener("mouseup",(t=>e(t.button)))}set onClick(e){this.element.addEventListener("click",(t=>e(t.button)))}set onMove(e){this.element.addEventListener("mousemove",(t=>e(t.movementX,t.movementY)))}set onDrag(e){this.element.addEventListener("drag",(t=>e(t.movementX,t.movementY)))}set onDragStart(e){this.element.addEventListener("dragstart",(()=>e()))}set onDragStop(e){this.element.addEventListener("dragend",(()=>e()))}set onDragOver(e){this.element.addEventListener("dragover",(()=>e()))}set onEnter(e){this.element.addEventListener("mouseenter",(()=>e()))}set onLeave(e){this.element.addEventListener("mouseleave",(()=>e()))}set onWheel(e){this.element.addEventListener("wheel",(t=>e(t.deltaY)))}set onResize(e){this.element.addEventListener("resize",(()=>e(this.element.clientWidth,this.element.clientHeight)))}set onDownRaw(e){this.element.addEventListener("mousedown",e)}set onUpRaw(e){this.element.addEventListener("mouseup",e)}set onClickRaw(e){this.element.addEventListener("click",e)}set onMoveRaw(e){this.element.addEventListener("mousemove",e)}set onDragRaw(e){this.element.addEventListener("drag",e)}set onDragStartRaw(e){this.element.addEventListener("dragstart",e)}set onDragStopRaw(e){this.element.addEventListener("dragend",e)}set onDragOverRaw(e){this.element.addEventListener("dragover",e)}set onEnterRaw(e){this.element.addEventListener("mouseenter",e)}set onLeaveRaw(e){this.element.addEventListener("mouseleave",e)}set onWheelRaw(e){this.element.addEventListener("wheel",e)}}E.instances=new Map;class C{constructor(e){this.root=e}initialize(){}update(e){}updateFrame(){}}class T extends C{constructor(){super(...arguments),this.worldX=0,this.worldY=0}initialize(){const e=k("playground-canvas");this.ctx=e.getContext("2d");const t=k("logo-wrapper");t.style.left=this.root.windowWidth/2+"px",t.style.top=this.root.windowHeight/2+"px",e.width=this.root.windowWidth,e.height=this.root.windowHeight,this.root.windowMouse.onResize=(r,o)=>{e.width=r,e.height=o,t.style.left=this.root.windowWidth/2+"px",t.style.top=this.root.windowHeight/2+"px"};{const e=k("stages"),r=E.attach(e);let o=!1;r.onDown=e=>{e===n.LEFT&&(this.root.structure.inventory.completelyClose(),o=!0)},this.root.windowMouse.onUp=e=>{e===n.LEFT&&(o=!1)},this.root.windowMouse.onLeave=()=>o=!1,this.root.windowMouse.onMove=(e,r)=>{if(!o)return;this.worldX+=e,this.worldY+=r,this.root.structure.updateWorldTransform();const n=this.worldX+this.root.windowWidth/2,i=this.worldY+this.root.windowHeight/2;t.style.left=`${n}px`,t.style.top=`${i}px`}}}updateFrame(){this.ctx.clearRect(0,0,this.root.windowWidth,this.root.windowHeight);const e=this.worldX+this.root.windowWidth/2,t=this.worldY+this.root.windowHeight/2;this.ctx.translate(e,t),this.lines(128,2,"#454570"),this.lines(32,1,"#353560"),this.ctx.translate(-e,-t)}lines(e,t,r){const o=this.ctx;o.strokeStyle=r,o.lineWidth=t;const n=this.root.windowWidth/2,i=this.root.windowHeight/2,s=Math.floor(-n/e)*e,a=Math.floor(-i/e)*e,d=Math.ceil(n/e)*e,l=Math.ceil(i/e)*e;for(let t=s;t<d;t++)o.beginPath(),o.moveTo(t*e,a*e),o.lineTo(t*e,l*e),o.stroke();for(let t=a;t<l;t++)o.beginPath(),o.moveTo(s*e,t*e),o.lineTo(d*e,t*e),o.stroke()}}class L{constructor(e,t){this.body=document.getElementById(`${t}-screen`),this.selector=document.getElementById(`${t}-screen-option`),E.attach(this.selector).onClick=this.enable.bind(this,e)}static create(e,t){return new L(e,t)}enable(e){e.disableAllScreens(),this.selector.classList.add("selected"),this.body.style.opacity="1"}disable(){this.selector.classList.remove("selected"),this.body.style.opacity="0"}}class S extends C{getByQuery(e){const t=this.body.querySelector(e);if(null===t)throw new Error(`No children with query ${e} found`);return t}getFirstChildClass(e){const t=this.body.querySelector(`.${e}`);if(null===t)throw new Error(`No children with class ${e} found`);return t}getChildID(e){const t=this.body.querySelector(`#${e}`);if(null===t)throw new Error(`No children with id ${e} found`);return t}}class M extends S{constructor(e,t,r,o){super(e),this.amount=0,this.growTime=1,this.replantAble=!0,this.unlocked=!1,this.seenBefore=!1,this.name=t,this.desc=r,this.growTime=o}setUnlocked(e){this.unlocked=e,this.body.classList.toggle("unlocked",this.unlocked),this.unlocked&&this.setSeenBefore(!0)}getUnlocked(){return this.unlocked}setSeenBefore(e){this.seenBefore=e,this.body.classList.toggle("seen-before",this.seenBefore)}getImage(){return`assets/images/crops/${this.name}.png`}createHTML(){const e=x({classes:["crop"]});return""!==this.name&&(e.innerHTML=`<img class="icon" src="${this.getImage()}" alt="${this.name}">`),e}createElement(e){this.body=this.createHTML(),e.appendChild(this.body)}}const F=JSON.parse('{"_":[{"name":"Over-world","color":"#742","crops":[{"name":"Carrot","desc":"A classic orange root vegetable that can be munched straight from the soil. Packed with vitamin A and a hint of crunch!","growthTime":15,"unlocked":true},{"name":"Corn","desc":"Tall and golden, corn stalks are a staple on any farm. Perfect for popcorn nights or corn on the cob.","growthTime":30},{"name":"Tomato","desc":"Juicy and red, tomatoes are perfect for salads, sauces, or just munching straight from the vine!","growthTime":18},{"name":"Potato","desc":"A humble underground treasure that’s as versatile as it gets. Boil, mash, fry—potatoes do it all!","growthTime":22},{"name":"Strawberry","desc":"Sweet and slightly tart, strawberries are a treat for both the farmer and anyone craving a fruity snack.","growthTime":12},{"name":"Lettuce","desc":"Crispy and green, lettuce is great for salads or adding a bit of crunch to your sandwich.","growthTime":10},{"name":"Pumpkin","desc":"A big orange vegetable that’s great for Halloween decorations and pies alike. Beware of spooky carvings!","growthTime":40},{"name":"Wheat","desc":"A staple crop that forms the base for bread and tons of baked goodies. Watch the golden waves grow!","growthTime":25},{"name":"Cabbage","desc":"A round, leafy vegetable that’s perfect for hearty soups, stews, and even a little sauerkraut.","growthTime":28},{"name":"Blueberry","desc":"Small but mighty! These tiny blue gems are packed with flavor and antioxidants.","growthTime":14},{"name":"Radish","desc":"A spicy little root with a kick. Great for salads or just nibbling on fresh from the ground.","growthTime":8},{"name":"Sunflower","desc":"Not just a flower! These bright blooms also produce seeds, perfect for snacking or replanting.","growthTime":35}]}]}');class A extends C{constructor(e){super(e),this.inventory=[],this.renderingCrop=null,this.draggingCrop=null,this.dragging=null,this.draggingTimeout=null,this.expanded=!1,this.informExpanded=!1,this.toggleable=!0,this.prevX=-1,this.prevY=-1,this.angle=0,this.angleVel=0,this.body=k("inventory"),this.innerBody=k("inv-container"),this.informOuter=k("inform-outer")}initialize(){{const e=F._;for(const t of e){const e=t.color,r=t.name,o=this.registerStage(r,e);for(const e of t.crops)this.registerCrop(o,e)}}this.root.windowMouse.onUp=e=>{var t;e===n.LEFT&&(null===(t=this.dragging)||void 0===t||t.remove(),this.dragging=null,this.draggingCrop=null)},E.attach(this.body).onLeave=()=>{(this.draggingCrop||this.draggingTimeout)&&(this.toggleable||setTimeout((()=>this.completelyClose()),500),this.completelyClose())},k("drawer-handle").addEventListener("click",(()=>this.toggleSelection()))}update(e){if(!this.dragging)return;const t=this.root.windowMouse.x,r=this.root.windowMouse.y;this.prevX<0&&(this.prevX=t),this.prevY<0&&(this.prevY=r);const o=(t-this.prevX)/e*.1,n=(r-this.prevY)/e*.1,i=o*Math.cos(this.angle-Math.PI/4)-(50-n)*Math.sin(this.angle-Math.PI/4);this.angleVel+=i*e,this.angle+=this.angleVel*e,this.angleVel*=.995,this.prevX=t,this.prevY=r,this.dragging.style.left=t+"px",this.dragging.style.top=r+"px",this.dragging.firstChild.style.transform=`rotate(${this.angle-Math.PI/4}rad) translateY(35%) rotate(45deg)`}updateFrame(){this.renderingCrop&&(k("information-crop-amount").innerText=`[${this.renderingCrop.amount}]`)}registerStage(e,t){const r=x({id:`stage-${e}`,classes:["stage-crops"],parent:this.innerBody});return r.style.setProperty("--stage-color",t),{name:e,color:t,crops:[],body:r}}registerCrop(e,t){const r=new M(this.root,t.name,t.desc,t.growthTime);e.crops.push(r),r.createElement(e.body),t.unlocked&&r.setUnlocked(!0);const o=E.attach(r.body);o.onClick=e=>{e===n.LEFT&&r.getUnlocked()&&this.toggleCropRender(r)},o.onDown=e=>{e===n.LEFT&&r.getUnlocked()&&(this.draggingTimeout=setTimeout((()=>{this.startDraggingCrop(r),this.draggingTimeout=null}),200))},o.onUp=e=>{e===n.LEFT&&this.draggingTimeout&&(clearTimeout(this.draggingTimeout),this.draggingTimeout=null)}}toggleSelection(){this.toggleable&&(this.toggleable=!1,setTimeout((()=>this.toggleable=!0),500),this.informExpanded?(this.informExpanded=!1,this.renderingCrop=null,this.getAudio("closing").play()):this.expanded?(this.expanded=!1,this.getAudio("closing").play()):(this.expanded=!0,this.getAudio("opening").play()),this.body.classList.toggle("open",this.expanded),this.informOuter.classList.toggle("open",this.informExpanded))}completelyClose(){this.toggleable?(this.informExpanded||this.expanded)&&(this.expanded=!1,this.informExpanded=!1,this.body.classList.toggle("open",!1),this.informOuter.classList.toggle("open",!1),this.getAudio("closing").play()):setTimeout((()=>this.completelyClose()),500)}toggleCropRender(e){if(!this.toggleable)return void setTimeout(this.toggleCropRender.bind(this),100);null!==this.renderingCrop&&this.renderingCrop!==e||(this.toggleable=!1,setTimeout((()=>this.toggleable=!0),500)),this.renderingCrop===e?this.renderingCrop=null:this.renderingCrop=e;const t=e.name.split("_").map((e=>e[0].toUpperCase()+e.slice(1))).join(" "),r=k("inform-drawer");this.informExpanded!==!!this.renderingCrop&&(this.informExpanded=!!this.renderingCrop,this.informOuter.classList.toggle("open",this.informExpanded),this.getAudio(this.informExpanded?"opening":"closing").play()),this.informOuter.classList.toggle("open",this.informExpanded),this.renderingCrop&&(r.innerHTML=`\n            <div class="header">\n                <span class="name">${t}</span><span id="information-crop-amount" class="amount">[${e.amount}]</span>\n                <span class="desc">${e.desc}</span>\n            </div>\n            <div class="divider"></div>\n            <div class="body">\n                <div class="buttons">\n                    <button class="sell">Sell 1</button>\n                    <button class="sell">Sell 10</button>\n                    <button class="sell-all">Sell All</button>\n                </div>\n            </div>\n        `)}startDraggingCrop(e){this.dragging||(this.draggingCrop=e,this.dragging=e.createHTML(),this.prevX=-1,this.prevY=-1,this.angle=0,this.angleVel=0,k("plantDrag").appendChild(this.dragging))}getAudio(e){return k(`drawer-${e}`)}}class B{constructor(e=0,t=0){this.setParts(e,t)}static fromNumber(e){if(isNaN(e)||!isFinite(e))throw new Error("Invalid number.");const[t,r]=e.toExponential().split("e").map(Number);return new B(t,r)}static fromString(e){const[t,r]=e.split("e").map(Number);return new B(t,r)}toString(){return this.exponent<6?`${Math.round(this.mantissa*Math.pow(10,this.exponent))}`:`${this.mantissa.toFixed(2)}e${this.exponent}`}setParts(e,t){if(isNaN(e)||isNaN(t)||!isFinite(e)||!isFinite(t))throw new Error("Invalid number parts.");this.mantissa=e,this.exponent=Math.floor(t),this.normalize()}normalize(){if(0===this.mantissa)this.exponent=0;else{for(;Math.abs(this.mantissa)>=10;)this.mantissa/=10,this.exponent++;for(;Math.abs(this.mantissa)<1&&0!==this.mantissa;)this.mantissa*=10,this.exponent--;this.mantissa=parseFloat(this.mantissa.toFixed(6))}}equals(e){return this.mantissa===e.mantissa&&this.exponent===e.exponent}greaterThan(e){return this.mantissa>e.mantissa||this.mantissa===e.mantissa&&this.exponent>e.exponent}greaterThanScalar(e){return this.greaterThan(B.fromNumber(e))}lessThan(e){return this.mantissa<e.mantissa||this.mantissa===e.mantissa&&this.exponent<e.exponent}lessThanScalar(e){return this.lessThan(B.fromNumber(e))}add(e){let t,r;this.exponent>e.exponent?(t=this,r=e):(t=e,r=this);const o=t.exponent-r.exponent,n=r.mantissa*Math.pow(10,-o),i=t.mantissa+n;return new B(i,t.exponent)}sub(e){return this.add(new B(-e.mantissa,e.exponent))}mult(e){const t=this.mantissa*e.mantissa,r=this.exponent+e.exponent;return new B(t,r)}div(e){if(0===e.mantissa)throw new Error("Division by zero.");const t=this.mantissa/e.mantissa,r=this.exponent-e.exponent;return new B(t,r)}pow(e){const t=(Math.log(this.mantissa)+this.exponent*Math.LN10)*(e.mantissa*Math.pow(10,e.exponent)),r=Math.exp(t);return B.fromNumber(r)}addScalar(e){return this.add(new B(e,0))}subScalar(e){return this.sub(new B(e,0))}multScalar(e){return this.mult(new B(e,0))}divScalar(e){return this.div(new B(e,0))}powScalar(e){const t=Math.pow(this.mantissa,e),r=this.exponent*e;return new B(t,r)}log10(){const e=Math.log10(this.mantissa)+this.exponent;return new B(e,0)}ln(){const e=Math.log(this.mantissa)+this.exponent*Math.LN10;return new B(e,0)}}class $ extends C{constructor(e,t,r){super(e),this.name=t,this.amount=B.fromNumber(r)}}class z extends ${constructor(e){super(e,"Money",0)}}class N extends S{constructor(e,t){super(e),this.stageX=0,this.stageY=0,this.id=t,this.currency=new z(e)}createElement(e){const t=x({id:`${this.id}-window`,classes:["stage"],parent:e}),r=this.createHeader(t),o=x({classes:["inner-body"],parent:t});this.body=t,this.structure={parent:e,body:t,header:r,innerBody:o}}createHeader(e){const t=x({classes:["header"],parent:e});return{body:t,title:x({classes:["title"],innerText:this.id,parent:t}),button:x({classes:["button"],parent:t})}}setupDragging(){const e=E.attach(this.structure.header.body);let t=!1;e.onDownRaw=e=>{if(e.button!==n.LEFT)return;if(t)return;t=!0;const r=this.structure.body;this.structure.parent.removeChild(r),this.structure.parent.appendChild(r),e.stopPropagation()},this.root.windowMouse.onMove=(e,r)=>{t&&(this.stageX+=e,this.stageY+=r,this.updateTransform())},this.root.windowMouse.onUp=e.onClick=e=>{e===n.LEFT&&t&&(t=!1)},this.root.windowMouse.onLeave=()=>t=!1,this.updateTransform(),this.root.windowMouse.onResize=()=>{this.updateTransform()}}updateTransform(){const e=this.body.getBoundingClientRect(),t=this.root.background.worldX,r=this.root.background.worldY,o=this.stageX+t-(e.width-this.root.windowWidth)/2,n=this.stageY+r-(e.height-this.root.windowHeight)/2;this.body.style.left=`${o}px`,this.body.style.top=`${n}px`}}class H extends S{constructor(){super(...arguments),this.currentCrop=null,this.cropBody=null,this.growthState=0,this.progress=0,this.growthWobble=null}update(e){if(this.currentCrop&&this.progress<100){if(this.progress+=100/this.currentCrop.growTime*e,this.progress<100)return;this.currentCrop.replantAble?this.replantCrop():(this.cropBody.classList.add("done"),setTimeout(this.cleanCrop.bind(this),500))}}updateFrame(){if(!this.cropBody)return;const e=Math.floor(this.progress/25);this.growthState!==e&&(this.growthState=e,this.cropBody.classList.add("wobble"),this.growthWobble&&clearTimeout(this.growthWobble),this.growthWobble=setTimeout((()=>this.cropBody.classList.remove("wobble")),500),this.cropBody.style.setProperty("--progress",""+(this.growthState/5+.2)))}harvestCrop(){this.currentCrop&&this.cropBody&&(this.progress<100||this.currentCrop.amount++)}cleanCrop(){this.currentCrop&&this.cropBody&&(this.harvestCrop(),this.cropBody.remove(),this.growthWobble&&clearTimeout(this.growthWobble),this.currentCrop=null,this.cropBody=null)}plantCrop(e){this.currentCrop=e,this.cropBody=e.createHTML(),this.cropBody.style.setProperty("--progress","0.20"),this.body.appendChild(this.cropBody),this.progress=0}replantCrop(){this.currentCrop&&this.cropBody&&(this.harvestCrop(),this.cropBody.style.setProperty("--progress","0.2"),this.progress=0)}isEmpty(){return!this.currentCrop}createElement(e){const t=x({classes:["land-wrapper"],parent:e});this.body=x({classes:["land"],parent:t}),this.updateFrame()}}class W extends N{constructor(e){super(e,"Farming"),this.farmLands=[]}initialize(){for(let e=0;e<9;e++)this.farmLands.push(new H(this.root))}update(e){for(const t of this.farmLands)t.update(e)}updateFrame(){for(const e of this.farmLands)e.updateFrame()}createElement(e){super.createElement(e);const t=this.structure.innerBody;this.farmBody=x({classes:["farm-body"],parent:t});for(const e of this.farmLands)e.createElement(this.farmBody),E.attach(e.body).onMove=()=>{if(!e.isEmpty())return;const t=this.root.structure.inventory;t.draggingCrop&&e.plantCrop(t.draggingCrop)}}}class D extends C{constructor(){super(...arguments),this.stages=[],this.inventory=new A(this.root),this.farm=new W(this.root)}initialize(){this.body=k("structure"),this.stagesBody=k("stages"),this.inventory.initialize(),this.setupStage(this.farm)}update(e){this.inventory.update(e);for(const t of this.stages)t.update(e)}updateFrame(){this.inventory.updateFrame();for(const e of this.stages)e.updateFrame()}setupStage(e){e.initialize(),e.createElement(this.stagesBody),e.setupDragging(),this.stages.push(e)}updateWorldTransform(){for(const e of this.stages)e.updateTransform()}}class I{constructor(){this.windowWidth=0,this.windowHeight=0,this.allScreens=[],this.allScreens.push(L.create(this,"main")),this.allScreens.push(L.create(this,"technology")),this.allScreens.push(L.create(this,"settings")),this.disableAllScreens(),this.allScreens[0].enable(this),this.background=new T(this),this.structure=new D(this)}initialize(){this.windowMouse=E.attach(document.body),this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,document.body.dispatchEvent(new Event("resize")),window.addEventListener("resize",(()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,document.body.dispatchEvent(new Event("resize"))})),this.background.initialize(),this.structure.initialize()}disableAllScreens(){this.allScreens.forEach((e=>e.disable()))}update(e){this.structure.update(e)}updateFrame(){this.background.updateFrame(),this.structure.updateFrame()}}var R;!function(e){e[e.Chrome=0]="Chrome",e[e.Firefox=1]="Firefox",e[e.Safari=2]="Safari",e[e.Edge=3]="Edge",e[e.IE=4]="IE",e[e.Opera=5]="Opera",e[e.Unknown=6]="Unknown"}(R||(R={}));const P=new o("Browser Support","✔️");class Y{static initialize(){this.browser=this.detectBrowser(),P.log("Browser: "+R[this.browser]),this.updateScrollbars()}static updateScrollbars(){if(this.browser!==R.Firefox)return;const e=[...document.getElementsByClassName("scrollable")];for(const t of e)t.classList.remove("scrollable"),t.classList.add("firefox-scrollbar")}static detectBrowser(){const e=navigator.userAgent;return/chrome|crios|crmo/i.test(e)?R.Chrome:/firefox|fxios/i.test(e)?R.Firefox:/safari/i.test(e)?R.Safari:/edg/i.test(e)?R.Edge:/trident/i.test(e)?R.IE:/opr\//i.test(e)?R.Opera:R.Unknown}}const O=new o("Error Screen","❌");class U{static setInactive(){k("error-screen").style.display="none"}static setActive(e=null){let t=e;e instanceof Error&&(t=e.message),e&&(k("error-screen").style.display="flex",document.querySelector("#error-screen .error").innerHTML=`<span>Error: </span> ${t}`),k("structure").remove(),O.toggleName(),O.toggleSymbol(),O.error(e)}}class X{constructor(){this.root=new I,this.fpsCounter=new y}initialize(){Y.initialize(),this.root.initialize(),this.preload(),this.startRunning()}preload(){setTimeout((()=>{const e=[...document.getElementsByClassName("preload")];for(const t of e)t.classList.remove("preload")}),500),U.setInactive()}startRunning(){const e=this.fpsCounter.update();this.root.update(e/1e3),this.root.updateFrame(),requestAnimationFrame((()=>this.startRunning()))}}const j=new o("Index Initialization","✅");j.log("Renderer initialized successfully!"),j.log("Imported main successfully!"),j.log("Starting the main process...");try{(new X).initialize()}catch(e){U.setActive(e)}})();